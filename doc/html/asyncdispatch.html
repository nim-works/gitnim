<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QQQEwksSS9ZWwAAAk1JREFUWMPtll2ITVEUx39nn/O7Y5qR8f05wtCUUr6ZIS++8pEnkZInPImneaCQ5METNdOkeFBKUhMPRIkHKfEuUZSUlGlKPN2TrgfncpvmnntnmlEyq1Z7t89/rf9a6+y99oZxGZf/XeIq61EdtgKXgdXA0xrYAvBjOIF1AI9zvjcC74BSpndrJPkBWDScTF8Aa4E3wDlgHbASaANmVqlcCnwHvgDvgVfAJ+AikAAvgfVZwLnSVZHZaOuKoQi3ZOMi4NkYkpe1p4J7A8BpYAD49hfIy/oqG0+hLomiKP2L5L+1ubn5115S+3OAn4EnwBlgMzCjyt6ZAnQCJ4A7wOs88iRJHvw50HoujuPBoCKwHWiosy8MdfZnAdcHk8dxXFJ3VQbQlCTJvRBCGdRbD4M6uc5glpY3eAihpN5S5w12diSEcCCEcKUO4ljdr15T76ur1FDDLIQQ3qv71EdDOe3Kxj3leRXyk+pxdWnFWod6Wt2bY3de3aSuUHcPBVimHs7mK9WrmeOF6lR1o9qnzskh2ar2qm1qizpfXaPeVGdlmGN5pb09qMxz1Xb1kLqgzn1RyH7JUXW52lr5e/Kqi9qpto7V1atuUzfnARrV7jEib1T76gG2qxdGmXyiekkt1GswPTtek0aBfJp6YySGBfWg2tPQ0FAYgf1stUfdmdcjarbYJEniKIq6gY/Aw+zWHAC+p2labGpqiorFYgGYCEzN7oQdQClN07O1/EfDyGgC0ALMBdYAi4FyK+4H3gLPsxfR1zRNi+NP7nH5J+QntnXe5B5mpfQAAAAASUVORK5CYII=">

<!-- Google fonts -->
<link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
<link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>

<!-- CSS -->
<title>std/asyncdispatch</title>
<link rel="stylesheet" type="text/css" href="nimdoc.out.css">

<script type="text/javascript" src="dochack.js"></script>

<script type="text/javascript">
function main() {
  var pragmaDots = document.getElementsByClassName("pragmadots");
  for (var i = 0; i < pragmaDots.length; i++) {
    pragmaDots[i].onclick = function(event) {
      // Hide tease
      event.target.parentNode.style.display = "none";
      // Show actual
      event.target.parentNode.nextElementSibling.style.display = "inline";
    }
  }

  function switchTheme(e) {
      if (e.target.checked) {
          document.documentElement.setAttribute('data-theme', 'dark');
          localStorage.setItem('theme', 'dark');
      } else {
          document.documentElement.setAttribute('data-theme', 'light');
          localStorage.setItem('theme', 'light');
      }
  }

  const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
  if (toggleSwitch !== null) {
    toggleSwitch.addEventListener('change', switchTheme, false);
  }

  var currentTheme = localStorage.getItem('theme');
  if (!currentTheme && window.matchMedia('(prefers-color-scheme: dark)').matches) {
    currentTheme = 'dark';
  }
  if (currentTheme) {
    document.documentElement.setAttribute('data-theme', currentTheme);

    if (currentTheme === 'dark' && toggleSwitch !== null) {
      toggleSwitch.checked = true;
    }
  }
}

window.addEventListener('DOMContentLoaded', main);
</script>

</head>
<body>
<div class="document" id="documentId">
  <div class="container">
    <h1 class="title">std/asyncdispatch</h1>
    <div class="row">
  <div class="three columns">
  <div class="theme-switch-wrapper">
    <label class="theme-switch" for="checkbox">
      <input type="checkbox" id="checkbox" />
      <div class="slider round"></div>
    </label>
    &nbsp;&nbsp;&nbsp; <em>Dark Mode</em>
  </div>
  <div id="global-links">
    <ul class="simple-boot">
      <li><a href="manual.html">Manual</a></li>
      <li><a href="lib.html">Standard library</a></li>
      <li> <a href="theindex.html">Index</a></li>
      <li><a href="compiler/theindex.html">Compiler docs</a></li>
      <li><a href="https://nim-lang.github.io/fusion/theindex.html">Fusion docs</a></li>
      <li><a href="https://nim-lang.github.io/Nim/">devel</a>, <a href="https://nim-lang.org/documentation.html">stable</a></li>
    </ul>
  </div>
  <div id="searchInputDiv">
    Search: <input type="text" id="searchInput"
      onkeyup="search()" />
  </div>
  
  <ul class="simple simple-toc" id="toc-list">
<li><a class="reference" id="asynchronous-procedures_toc" href="#asynchronous-procedures">Asynchronous procedures</a></li>
<ul class="simple"><li><a class="reference" id="asynchronous-procedures-handling-exceptions_toc" href="#asynchronous-procedures-handling-exceptions">Handling Exceptions</a></li>
</ul><li><a class="reference" id="discarding-futures_toc" href="#discarding-futures">Discarding futures</a></li>
<li><a class="reference" id="examples_toc" href="#examples">Examples</a></li>
<li><a class="reference" id="investigating-pending-futures_toc" href="#investigating-pending-futures">Investigating pending futures</a></li>
<li><a class="reference" id="limitationsslashbugs_toc" href="#limitationsslashbugs">Limitations/Bugs</a></li>
<li><a class="reference" id="multiple-async-backend-support_toc" href="#multiple-async-backend-support">Multiple async backend support</a></li>
<li>
  <a class="reference reference-toplevel" href="#6" id="56">Imports</a>
  <ul class="simple simple-toc-section">
    
  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#7" id="57">Types</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#AsyncEvent"
    title="AsyncEvent = ptr AsyncEventImpl">AsyncEvent</a></li>
  <li><a class="reference" href="#AsyncFD"
    title="AsyncFD = distinct int">AsyncFD</a></li>
  <li><a class="reference" href="#Callback"
    title="Callback = proc (fd: AsyncFD): bool {.closure, gcsafe.}">Callback</a></li>
  <li><a class="reference" href="#CompletionData"
    title="CompletionData = object
  fd*: AsyncFD
  cb*: owned(proc (fd: AsyncFD; bytesTransferred: DWORD; errcode: OSErrorCode) {.
      closure, gcsafe.})
  cell*: ForeignCell">CompletionData</a></li>
  <li><a class="reference" href="#CustomRef"
    title="CustomRef = ref CustomObj">CustomRef</a></li>
  <li><a class="reference" href="#PDispatcher"
    title="PDispatcher = ref object of PDispatcherBase
  ioPort: Handle
  handles*: HashSet[AsyncFD]">PDispatcher</a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#12" id="62">Procs</a>
  <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">==
      <li><a class="reference" href="#%3D%3D%2CAsyncFD%2CAsyncFD"
    title="`==`(x: AsyncFD; y: AsyncFD): bool">`==`(x: AsyncFD; y: AsyncFD): bool</a></li>

  </ul>
  <ul class="simple nested-toc-section">accept
      <li><a class="reference" href="#accept%2CAsyncFD"
    title="accept(socket: AsyncFD; flags = {SafeDisconn};
       inheritable = defined(nimInheritHandles)): owned(Future[AsyncFD])">accept(socket: AsyncFD; flags = {SafeDisconn};
       inheritable = defined(nimInheritHandles)): owned(Future[AsyncFD])</a></li>

  </ul>
  <ul class="simple nested-toc-section">acceptAddr
      <li><a class="reference" href="#acceptAddr%2CAsyncFD"
    title="acceptAddr(socket: AsyncFD; flags = {SafeDisconn};
           inheritable = defined(nimInheritHandles)): owned(
    Future[tuple[address: string, client: AsyncFD]])">acceptAddr(socket: AsyncFD; flags = {SafeDisconn};
           inheritable = defined(nimInheritHandles)): owned(
    Future[tuple[address: string, client: AsyncFD]])</a></li>

  </ul>
  <ul class="simple nested-toc-section">activeDescriptors
      <li><a class="reference" href="#activeDescriptors"
    title="activeDescriptors(): int">activeDescriptors(): int</a></li>

  </ul>
  <ul class="simple nested-toc-section">addEvent
      <li><a class="reference" href="#addEvent%2CAsyncEvent%2CCallback"
    title="addEvent(ev: AsyncEvent; cb: Callback)">addEvent(ev: AsyncEvent; cb: Callback)</a></li>

  </ul>
  <ul class="simple nested-toc-section">addProcess
      <li><a class="reference" href="#addProcess%2Cint%2CCallback"
    title="addProcess(pid: int; cb: Callback)">addProcess(pid: int; cb: Callback)</a></li>

  </ul>
  <ul class="simple nested-toc-section">addRead
      <li><a class="reference" href="#addRead%2CAsyncFD%2CCallback"
    title="addRead(fd: AsyncFD; cb: Callback)">addRead(fd: AsyncFD; cb: Callback)</a></li>

  </ul>
  <ul class="simple nested-toc-section">addTimer
      <li><a class="reference" href="#addTimer%2Cint%2Cbool%2CCallback"
    title="addTimer(timeout: int; oneshot: bool; cb: Callback)">addTimer(timeout: int; oneshot: bool; cb: Callback)</a></li>

  </ul>
  <ul class="simple nested-toc-section">addWrite
      <li><a class="reference" href="#addWrite%2CAsyncFD%2CCallback"
    title="addWrite(fd: AsyncFD; cb: Callback)">addWrite(fd: AsyncFD; cb: Callback)</a></li>

  </ul>
  <ul class="simple nested-toc-section">callSoon
      <li><a class="reference" href="#callSoon%2Cproc%29"
    title="callSoon(cbproc: proc () {.gcsafe.})">callSoon(cbproc: proc () {.gcsafe.})</a></li>

  </ul>
  <ul class="simple nested-toc-section">close
      <li><a class="reference" href="#close%2CAsyncEvent"
    title="close(ev: AsyncEvent)">close(ev: AsyncEvent)</a></li>

  </ul>
  <ul class="simple nested-toc-section">closeSocket
      <li><a class="reference" href="#closeSocket%2CAsyncFD"
    title="closeSocket(socket: AsyncFD)">closeSocket(socket: AsyncFD)</a></li>

  </ul>
  <ul class="simple nested-toc-section">connect
      <li><a class="reference" href="#connect%2CAsyncFD%2Cstring%2CPort"
    title="connect(socket: AsyncFD; address: string; port: Port; domain = Domain.AF_INET): owned(
    Future[void])">connect(socket: AsyncFD; address: string; port: Port; domain = Domain.AF_INET): owned(
    Future[void])</a></li>

  </ul>
  <ul class="simple nested-toc-section">contains
      <li><a class="reference" href="#contains%2CPDispatcher%2CAsyncFD"
    title="contains(disp: PDispatcher; fd: AsyncFD): bool">contains(disp: PDispatcher; fd: AsyncFD): bool</a></li>

  </ul>
  <ul class="simple nested-toc-section">createAsyncNativeSocket
      <li><a class="reference" href="#createAsyncNativeSocket%2Ccint%2Ccint%2Ccint"
    title="createAsyncNativeSocket(domain: cint; sockType: cint; protocol: cint;
                        inheritable = defined(nimInheritHandles)): AsyncFD">createAsyncNativeSocket(domain: cint; sockType: cint; protocol: cint;
                        inheritable = defined(nimInheritHandles)): AsyncFD</a></li>
  <li><a class="reference" href="#createAsyncNativeSocket%2CDomain%2CSockType%2CProtocol"
    title="createAsyncNativeSocket(domain: Domain = Domain.AF_INET;
                        sockType: SockType = SOCK_STREAM;
                        protocol: Protocol = IPPROTO_TCP;
                        inheritable = defined(nimInheritHandles)): AsyncFD">createAsyncNativeSocket(domain: Domain = Domain.AF_INET;
                        sockType: SockType = SOCK_STREAM;
                        protocol: Protocol = IPPROTO_TCP;
                        inheritable = defined(nimInheritHandles)): AsyncFD</a></li>

  </ul>
  <ul class="simple nested-toc-section">dial
      <li><a class="reference" href="#dial%2Cstring%2CPort%2CProtocol"
    title="dial(address: string; port: Port; protocol: Protocol = IPPROTO_TCP): owned(
    Future[AsyncFD])">dial(address: string; port: Port; protocol: Protocol = IPPROTO_TCP): owned(
    Future[AsyncFD])</a></li>

  </ul>
  <ul class="simple nested-toc-section">drain
      <li><a class="reference" href="#drain%2Cint"
    title="drain(timeout = 500)">drain(timeout = 500)</a></li>

  </ul>
  <ul class="simple nested-toc-section">getGlobalDispatcher
      <li><a class="reference" href="#getGlobalDispatcher"
    title="getGlobalDispatcher(): PDispatcher">getGlobalDispatcher(): PDispatcher</a></li>

  </ul>
  <ul class="simple nested-toc-section">getIoHandler
      <li><a class="reference" href="#getIoHandler%2CPDispatcher"
    title="getIoHandler(disp: PDispatcher): Handle">getIoHandler(disp: PDispatcher): Handle</a></li>

  </ul>
  <ul class="simple nested-toc-section">hasPendingOperations
      <li><a class="reference" href="#hasPendingOperations"
    title="hasPendingOperations(): bool">hasPendingOperations(): bool</a></li>

  </ul>
  <ul class="simple nested-toc-section">maxDescriptors
      <li><a class="reference" href="#maxDescriptors"
    title="maxDescriptors(): int">maxDescriptors(): int</a></li>

  </ul>
  <ul class="simple nested-toc-section">newAsyncEvent
      <li><a class="reference" href="#newAsyncEvent"
    title="newAsyncEvent(): AsyncEvent">newAsyncEvent(): AsyncEvent</a></li>

  </ul>
  <ul class="simple nested-toc-section">newCustom
      <li><a class="reference" href="#newCustom"
    title="newCustom(): CustomRef">newCustom(): CustomRef</a></li>

  </ul>
  <ul class="simple nested-toc-section">newDispatcher
      <li><a class="reference" href="#newDispatcher"
    title="newDispatcher(): owned PDispatcher">newDispatcher(): owned PDispatcher</a></li>

  </ul>
  <ul class="simple nested-toc-section">poll
      <li><a class="reference" href="#poll%2Cint"
    title="poll(timeout = 500)">poll(timeout = 500)</a></li>

  </ul>
  <ul class="simple nested-toc-section">readAll
      <li><a class="reference" href="#readAll%2CFutureStream%5Bstring%5D"
    title="readAll(future: FutureStream[string]): owned(Future[string])">readAll(future: FutureStream[string]): owned(Future[string])</a></li>

  </ul>
  <ul class="simple nested-toc-section">recv
      <li><a class="reference" href="#recv%2CAsyncFD%2Cint"
    title="recv(socket: AsyncFD; size: int; flags = {SafeDisconn}): owned(Future[string])">recv(socket: AsyncFD; size: int; flags = {SafeDisconn}): owned(Future[string])</a></li>

  </ul>
  <ul class="simple nested-toc-section">recvFromInto
      <li><a class="reference" href="#recvFromInto%2CAsyncFD%2Cpointer%2Cint%2Cptr.SockAddr%2Cptr.SockLen"
    title="recvFromInto(socket: AsyncFD; data: pointer; size: int; saddr: ptr SockAddr;
             saddrLen: ptr SockLen; flags = {SafeDisconn}): owned(Future[int])">recvFromInto(socket: AsyncFD; data: pointer; size: int; saddr: ptr SockAddr;
             saddrLen: ptr SockLen; flags = {SafeDisconn}): owned(Future[int])</a></li>

  </ul>
  <ul class="simple nested-toc-section">recvInto
      <li><a class="reference" href="#recvInto%2CAsyncFD%2Cpointer%2Cint"
    title="recvInto(socket: AsyncFD; buf: pointer; size: int; flags = {SafeDisconn}): owned(
    Future[int])">recvInto(socket: AsyncFD; buf: pointer; size: int; flags = {SafeDisconn}): owned(
    Future[int])</a></li>

  </ul>
  <ul class="simple nested-toc-section">register
      <li><a class="reference" href="#register%2CAsyncFD"
    title="register(fd: AsyncFD)">register(fd: AsyncFD)</a></li>

  </ul>
  <ul class="simple nested-toc-section">runForever
      <li><a class="reference" href="#runForever"
    title="runForever()">runForever()</a></li>

  </ul>
  <ul class="simple nested-toc-section">send
      <li><a class="reference" href="#send%2CAsyncFD%2Cpointer%2Cint"
    title="send(socket: AsyncFD; buf: pointer; size: int; flags = {SafeDisconn}): owned(
    Future[void])">send(socket: AsyncFD; buf: pointer; size: int; flags = {SafeDisconn}): owned(
    Future[void])</a></li>
  <li><a class="reference" href="#send%2CAsyncFD%2Cstring"
    title="send(socket: AsyncFD; data: string; flags = {SafeDisconn}): owned(Future[void])">send(socket: AsyncFD; data: string; flags = {SafeDisconn}): owned(Future[void])</a></li>

  </ul>
  <ul class="simple nested-toc-section">sendTo
      <li><a class="reference" href="#sendTo%2CAsyncFD%2Cpointer%2Cint%2Cptr.SockAddr%2CSockLen"
    title="sendTo(socket: AsyncFD; data: pointer; size: int; saddr: ptr SockAddr;
       saddrLen: SockLen; flags = {SafeDisconn}): owned(Future[void])">sendTo(socket: AsyncFD; data: pointer; size: int; saddr: ptr SockAddr;
       saddrLen: SockLen; flags = {SafeDisconn}): owned(Future[void])</a></li>

  </ul>
  <ul class="simple nested-toc-section">setGlobalDispatcher
      <li><a class="reference" href="#setGlobalDispatcher%2CsinkPDispatcher"
    title="setGlobalDispatcher(disp: sink PDispatcher)">setGlobalDispatcher(disp: sink PDispatcher)</a></li>

  </ul>
  <ul class="simple nested-toc-section">setInheritable
      <li><a class="reference" href="#setInheritable%2CAsyncFD%2Cbool"
    title="setInheritable(fd: AsyncFD; inheritable: bool): bool">setInheritable(fd: AsyncFD; inheritable: bool): bool</a></li>

  </ul>
  <ul class="simple nested-toc-section">sleepAsync
      <li><a class="reference" href="#sleepAsync"
    title="sleepAsync(ms: int | float): owned(Future[void])">sleepAsync(ms: int | float): owned(Future[void])</a></li>

  </ul>
  <ul class="simple nested-toc-section">trigger
      <li><a class="reference" href="#trigger%2CAsyncEvent"
    title="trigger(ev: AsyncEvent)">trigger(ev: AsyncEvent)</a></li>

  </ul>
  <ul class="simple nested-toc-section">unregister
      <li><a class="reference" href="#unregister%2CAsyncEvent"
    title="unregister(ev: AsyncEvent)">unregister(ev: AsyncEvent)</a></li>
  <li><a class="reference" href="#unregister%2CAsyncFD"
    title="unregister(fd: AsyncFD)">unregister(fd: AsyncFD)</a></li>

  </ul>
  <ul class="simple nested-toc-section">waitFor
      <li><a class="reference" href="#waitFor%2CFuture%5BT%5D"
    title="waitFor[T](fut: Future[T]): T">waitFor[T](fut: Future[T]): T</a></li>

  </ul>
  <ul class="simple nested-toc-section">withTimeout
      <li><a class="reference" href="#withTimeout%2CFuture%5BT%5D%2Cint"
    title="withTimeout[T](fut: Future[T]; timeout: int): owned(Future[bool])">withTimeout[T](fut: Future[T]; timeout: int): owned(Future[bool])</a></li>

  </ul>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#17" id="67">Macros</a>
  <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">async
      <li><a class="reference" href="#async.m%2Cuntyped"
    title="async(prc: untyped): untyped">async(prc: untyped): untyped</a></li>

  </ul>
  <ul class="simple nested-toc-section">multisync
      <li><a class="reference" href="#multisync.m%2Cuntyped"
    title="multisync(prc: untyped): untyped">multisync(prc: untyped): untyped</a></li>

  </ul>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#18" id="68">Templates</a>
  <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">await
      <li><a class="reference" href="#await.t%2Ctyped"
    title="await(f: typed): untyped">await(f: typed): untyped</a></li>
  <li><a class="reference" href="#await.t%2CFuture%5BT%5D"
    title="await[T](f: Future[T]): auto">await[T](f: Future[T]): auto</a></li>

  </ul>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#19" id="69">Exports</a>
  <ul class="simple simple-toc-section">
    
  </ul>
</li>

</ul>

  </div>
  &nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L1"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L1" class="link-seesrc" target="_blank" >Edit</a>

  <div class="nine columns" id="content">
  <div id="tocRoot"></div>
  
  <p class="module-desc"><p>This module implements asynchronous IO. This includes a dispatcher, a <tt class="docutils literal"><span class="pre"><span class="Identifier">Future</span></span></tt> type implementation, and an <tt class="docutils literal"><span class="pre"><span class="Identifier">async</span></span></tt> macro which allows asynchronous code to be written in a synchronous style with the <tt class="docutils literal"><span class="pre"><span class="Identifier">await</span></span></tt> keyword.</p>
<p>The dispatcher acts as a kind of event loop. You must call <tt class="docutils literal"><span class="pre"><span class="Identifier">poll</span></span></tt> on it (or a function which does so for you such as <tt class="docutils literal"><span class="pre"><span class="Identifier">waitFor</span></span></tt> or <tt class="docutils literal"><span class="pre"><span class="Identifier">runForever</span></span></tt>) in order to poll for any outstanding events. The underlying implementation is based on epoll on Linux, IO Completion Ports on Windows and select on other operating systems.</p>
<p>The <tt class="docutils literal"><span class="pre"><span class="Identifier">poll</span></span></tt> function will not, on its own, return any events. Instead an appropriate <tt class="docutils literal"><span class="pre"><span class="Identifier">Future</span></span></tt> object will be completed. A <tt class="docutils literal"><span class="pre"><span class="Identifier">Future</span></span></tt> is a type which holds a value which is not yet available, but which <em>may</em> be available in the future. You can check whether a future is finished by using the <tt class="docutils literal"><span class="pre"><span class="Identifier">finished</span></span></tt> function. When a future is finished it means that either the value that it holds is now available or it holds an error instead. The latter situation occurs when the operation to complete a future fails with an exception. You can distinguish between the two situations with the <tt class="docutils literal"><span class="pre"><span class="Identifier">failed</span></span></tt> function.</p>
<p>Future objects can also store a callback procedure which will be called automatically once the future completes.</p>
<p>Futures therefore can be thought of as an implementation of the proactor pattern. In this pattern you make a request for an action, and once that action is fulfilled a future is completed with the result of that action. Requests can be made by calling the appropriate functions. For example: calling the <tt class="docutils literal"><span class="pre"><span class="Identifier">recv</span></span></tt> function will create a request for some data to be read from a socket. The future which the <tt class="docutils literal"><span class="pre"><span class="Identifier">recv</span></span></tt> function returns will then complete once the requested amount of data is read <strong>or</strong> an exception occurs.</p>
<p>Code to read some data from a socket may look something like this:</p>
<pre class="listing"><span class="Keyword">var</span> <span class="Identifier">future</span> <span class="Operator">=</span> <span class="Identifier">socket</span><span class="Operator">.</span><span class="Identifier">recv</span><span class="Punctuation">(</span><span class="DecNumber">100</span><span class="Punctuation">)</span>
<span class="Identifier">future</span><span class="Operator">.</span><span class="Identifier">addCallback</span><span class="Punctuation">(</span>
  <span class="Keyword">proc</span> <span class="Punctuation">(</span><span class="Punctuation">)</span> <span class="Operator">=</span>
    <span class="Identifier">echo</span><span class="Punctuation">(</span><span class="Identifier">future</span><span class="Operator">.</span><span class="Identifier">read</span><span class="Punctuation">)</span>
<span class="Punctuation">)</span></pre><p>All asynchronous functions returning a <tt class="docutils literal"><span class="pre"><span class="Identifier">Future</span></span></tt> will not block. They will not however return immediately. An asynchronous function will have code which will be executed before an asynchronous request is made, in most cases this code sets up the request.</p>
<p>In the above example, the <tt class="docutils literal"><span class="pre"><span class="Identifier">recv</span></span></tt> function will return a brand new <tt class="docutils literal"><span class="pre"><span class="Identifier">Future</span></span></tt> instance once the request for data to be read from the socket is made. This <tt class="docutils literal"><span class="pre"><span class="Identifier">Future</span></span></tt> instance will complete once the requested amount of data is read, in this case it is 100 bytes. The second line sets a callback on this future which will be called once the future completes. All the callback does is write the data stored in the future to <tt class="docutils literal"><span class="pre"><span class="Identifier">stdout</span></span></tt>. The <tt class="docutils literal"><span class="pre"><span class="Identifier">read</span></span></tt> function is used for this and it checks whether the future completes with an error for you (if it did, it will simply raise the error), if there is no error, however, it returns the value of the future.</p>

<h1><a class="toc-backref" id="asynchronous-procedures" href="#asynchronous-procedures">Asynchronous procedures</a></h1><p>Asynchronous procedures remove the pain of working with callbacks. They do this by allowing you to write asynchronous code the same way as you would write synchronous code.</p>
<p>An asynchronous procedure is marked using the <tt class="docutils literal"><span class="pre"><span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">async</span><span class="Operator">.</span><span class="Punctuation">}</span></span></tt> pragma. When marking a procedure with the <tt class="docutils literal"><span class="pre"><span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">async</span><span class="Operator">.</span><span class="Punctuation">}</span></span></tt> pragma it must have a <tt class="docutils literal"><span class="pre"><span class="Identifier">Future</span><span class="Punctuation">[</span><span class="Identifier">T</span><span class="Punctuation">]</span></span></tt> return type or no return type at all. If you do not specify a return type then <tt class="docutils literal"><span class="pre"><span class="Identifier">Future</span><span class="Punctuation">[</span><span class="Identifier">void</span><span class="Punctuation">]</span></span></tt> is assumed.</p>
<p>Inside asynchronous procedures <tt class="docutils literal"><span class="pre"><span class="Identifier">await</span></span></tt> can be used to call any procedures which return a <tt class="docutils literal"><span class="pre"><span class="Identifier">Future</span></span></tt>; this includes asynchronous procedures. When a procedure is &quot;awaited&quot;, the asynchronous procedure it is awaited in will suspend its execution until the awaited procedure's Future completes. At which point the asynchronous procedure will resume its execution. During the period when an asynchronous procedure is suspended other asynchronous procedures will be run by the dispatcher.</p>
<p>The <tt class="docutils literal"><span class="pre"><span class="Identifier">await</span></span></tt> call may be used in many contexts. It can be used on the right hand side of a variable declaration: <tt class="docutils literal"><span class="pre"><span class="Keyword">var</span> <span class="Identifier">data</span> <span class="Operator">=</span> <span class="Identifier">await</span> <span class="Identifier">socket</span><span class="Operator">.</span><span class="Identifier">recv</span><span class="Punctuation">(</span><span class="DecNumber">100</span><span class="Punctuation">)</span></span></tt>, in which case the variable will be set to the value of the future automatically. It can be used to await a <tt class="docutils literal"><span class="pre"><span class="Identifier">Future</span></span></tt> object, and it can be used to await a procedure returning a <tt class="docutils literal"><span class="pre"><span class="Identifier">Future</span><span class="Punctuation">[</span><span class="Identifier">void</span><span class="Punctuation">]</span></span></tt>: <tt class="docutils literal"><span class="pre"><span class="Identifier">await</span> <span class="Identifier">socket</span><span class="Operator">.</span><span class="Identifier">send</span><span class="Punctuation">(</span><span class="StringLit">&quot;foobar&quot;</span><span class="Punctuation">)</span></span></tt>.</p>
<p>If an awaited future completes with an error, then <tt class="docutils literal"><span class="pre"><span class="Identifier">await</span></span></tt> will re-raise this error. To avoid this, you can use the <tt class="docutils literal"><span class="pre"><span class="Keyword">yield</span></span></tt> keyword instead of <tt class="docutils literal"><span class="pre"><span class="Identifier">await</span></span></tt>. The following section shows different ways that you can handle exceptions in async procs.</p>

<h2><a class="toc-backref" id="asynchronous-procedures-handling-exceptions" href="#asynchronous-procedures-handling-exceptions">Handling Exceptions</a></h2><p>The most reliable way to handle exceptions is to use <tt class="docutils literal"><span class="pre"><span class="Keyword">yield</span></span></tt> on a future then check the future's <tt class="docutils literal"><span class="pre"><span class="Identifier">failed</span></span></tt> property. For example:</p>
<pre class="listing"><span class="Keyword">var</span> <span class="Identifier">future</span> <span class="Operator">=</span> <span class="Identifier">sock</span><span class="Operator">.</span><span class="Identifier">recv</span><span class="Punctuation">(</span><span class="DecNumber">100</span><span class="Punctuation">)</span>
<span class="Keyword">yield</span> <span class="Identifier">future</span>
<span class="Keyword">if</span> <span class="Identifier">future</span><span class="Operator">.</span><span class="Identifier">failed</span><span class="Punctuation">:</span>
  <span class="Comment"># Handle exception</span></pre><p>The <tt class="docutils literal"><span class="pre"><span class="Identifier">async</span></span></tt> procedures also offer limited support for the try statement.</p>
<pre class="listing"><span class="Keyword">try</span><span class="Punctuation">:</span>
  <span class="Keyword">let</span> <span class="Identifier">data</span> <span class="Operator">=</span> <span class="Identifier">await</span> <span class="Identifier">sock</span><span class="Operator">.</span><span class="Identifier">recv</span><span class="Punctuation">(</span><span class="DecNumber">100</span><span class="Punctuation">)</span>
  <span class="Identifier">echo</span><span class="Punctuation">(</span><span class="StringLit">&quot;Received &quot;</span><span class="Punctuation">,</span> <span class="Identifier">data</span><span class="Punctuation">)</span>
<span class="Keyword">except</span><span class="Punctuation">:</span>
  <span class="Comment"># Handle exception</span></pre><p>Unfortunately the semantics of the try statement may not always be correct, and occasionally the compilation may fail altogether. As such it is better to use the former style when possible.</p>

<h1><a class="toc-backref" id="discarding-futures" href="#discarding-futures">Discarding futures</a></h1><p>Futures should <strong>never</strong> be discarded. This is because they may contain errors. If you do not care for the result of a Future then you should use the <tt class="docutils literal"><span class="pre"><span class="Identifier">asyncCheck</span></span></tt> procedure instead of the <tt class="docutils literal"><span class="pre"><span class="Keyword">discard</span></span></tt> keyword. Note however that this does not wait for completion, and you should use <tt class="docutils literal"><span class="pre"><span class="Identifier">waitFor</span></span></tt> for that purpose.</p>

<h1><a class="toc-backref" id="examples" href="#examples">Examples</a></h1><p>For examples take a look at the documentation for the modules implementing asynchronous IO. A good place to start is the <a class="reference external" href="asyncnet.html">asyncnet module</a>.</p>

<h1><a class="toc-backref" id="investigating-pending-futures" href="#investigating-pending-futures">Investigating pending futures</a></h1><p>It's possible to get into a situation where an async proc, or more accurately a <tt class="docutils literal"><span class="pre"><span class="Identifier">Future</span><span class="Punctuation">[</span><span class="Identifier">T</span><span class="Punctuation">]</span></span></tt> gets stuck and never completes. This can happen for various reasons and can cause serious memory leaks. When this occurs it's hard to identify the procedure that is stuck.</p>
<p>Thankfully there is a mechanism which tracks the count of each pending future. All you need to do to enable it is compile with <tt class="docutils literal"><span class="pre"><span class="Operator">-</span><span class="Identifier">d</span><span class="Punctuation">:</span><span class="Identifier">futureLogging</span></span></tt> and use the <tt class="docutils literal"><span class="pre"><span class="Identifier">getFuturesInProgress</span></span></tt> procedure to get the list of pending futures together with the stack traces to the moment of their creation.</p>
<p>You may also find it useful to use this <a class="reference external" href="https://github.com/dom96/prometheus">prometheus package</a> which will log the pending futures into prometheus, allowing you to analyse them via a nice graph.</p>

<h1><a class="toc-backref" id="limitationsslashbugs" href="#limitationsslashbugs">Limitations/Bugs</a></h1><ul class="simple"><li>The effect system (<tt class="docutils literal"><span class="pre"><span class="Identifier">raises</span><span class="Punctuation">:</span> <span class="Punctuation">[</span><span class="Punctuation">]</span></span></tt>) does not work with async procedures.</li>
</ul>

<h1><a class="toc-backref" id="multiple-async-backend-support" href="#multiple-async-backend-support">Multiple async backend support</a></h1><p>Thanks to its powerful macro support, Nim allows <tt class="docutils literal"><span class="pre">async</span></tt>/<tt class="docutils literal"><span class="pre">await</span></tt> to be implemented in libraries with only minimal support from the language - as such, multiple <tt class="docutils literal"><span class="pre">async</span></tt> libraries exist, including <tt class="docutils literal"><span class="pre">asyncdispatch</span></tt> and <tt class="docutils literal"><span class="pre">chronos</span></tt>, and more may come to be developed in the future.</p>
<p>Libraries built on top of async/await may wish to support multiple async backends - the best way to do so is to create separate modules for each backend that may be imported side-by-side.</p>
<p>An alternative way is to select backend using a global compile flag - this method makes it difficult to compose applications that use both backends as may happen with transitive dependencies, but may be appropriate in some cases - libraries choosing this path should call the flag <tt class="docutils literal"><span class="pre"><span class="Identifier">asyncBackend</span></span></tt>, allowing applications to choose the backend with <tt class="docutils literal"><span class="pre"><span class="Operator">-</span><span class="Identifier">d</span><span class="Punctuation">:</span><span class="Identifier">asyncBackend</span><span class="Operator">=&lt;</span><span class="Identifier">backend_name</span><span class="Operator">&gt;</span></span></tt>.</p>
<p>Known <tt class="docutils literal"><span class="pre"><span class="Identifier">async</span></span></tt> backends include:</p>
<ul class="simple"><li><tt class="docutils literal"><span class="pre"><span class="Operator">-</span><span class="Identifier">d</span><span class="Punctuation">:</span><span class="Identifier">asyncBackend</span><span class="Operator">=</span><span class="Identifier">none</span></span></tt>: disable <tt class="docutils literal"><span class="pre"><span class="Identifier">async</span></span></tt> support completely</li>
<li><tt class="docutils literal"><span class="pre"><span class="Operator">-</span><span class="Identifier">d</span><span class="Punctuation">:</span><span class="Identifier">asyncBackend</span><span class="Operator">=</span><span class="Identifier">asyncdispatch</span></span></tt>: <a class="reference external" href="https://nim-lang.org/docs/asyncdispatch.html">https://nim-lang.org/docs/asyncdispatch.html</a></li>
<li><tt class="docutils literal"><span class="pre"><span class="Operator">-</span><span class="Identifier">d</span><span class="Punctuation">:</span><span class="Identifier">asyncBackend</span><span class="Operator">=</span><span class="Identifier">chronos</span></span></tt>: <a class="reference external" href="https://github.com/status-im/nim-chronos/">https://github.com/status-im/nim-chronos/</a></li>
</ul>
<p><tt class="docutils literal"><span class="pre">none</span></tt> can be used when a library supports both a synchronous and asynchronous API, to disable the latter.</p>
<tt class="docutils literal"><span class="pre"><span class="Identifier">asyncdispatch</span></span></tt> module depends on the <tt class="docutils literal"><span class="pre"><span class="Identifier">asyncmacro</span></span></tt> module to work properly.</p>
  <div class="section" id="6">
<h1><a class="toc-backref" href="#6">Imports</a></h1>
<dl class="item">
<a class="reference external" href="os.html">os</a>, <a class="reference external" href="tables.html">tables</a>, <a class="reference external" href="strutils.html">strutils</a>, <a class="reference external" href="times.html">times</a>, <a class="reference external" href="heapqueue.html">heapqueue</a>, <a class="reference external" href="options.html">options</a>, <a class="reference external" href="asyncstreams.html">asyncstreams</a>, <a class="reference external" href="options.html">options</a>, <a class="reference external" href="math.html">math</a>, <a class="reference external" href="monotimes.html">monotimes</a>, <a class="reference external" href="asyncfutures.html">asyncfutures</a>, <a class="reference external" href="nativesockets.html">nativesockets</a>, <a class="reference external" href="net.html">net</a>, <a class="reference external" href="deques.html">deques</a>, <a class="reference external" href="winlean.html">winlean</a>, <a class="reference external" href="sets.html">sets</a>, <a class="reference external" href="hashes.html">hashes</a>, <a class="reference external" href="macros.html">macros</a>, <a class="reference external" href="strutils.html">strutils</a>, <a class="reference external" href="asyncfutures.html">asyncfutures</a>, <a class="reference external" href="posix.html">posix</a>
</dl></div>
<div class="section" id="7">
<h1><a class="toc-backref" href="#7">Types</a></h1>
<dl class="item">
<div id="AsyncEvent">
<dt><pre><a href="asyncdispatch.html#AsyncEvent"><span class="Identifier">AsyncEvent</span></a> <span class="Other">=</span> <span class="Keyword">ptr</span> <span class="Identifier">AsyncEventImpl</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L302"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L302" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="AsyncFD">
<dt><pre><a href="asyncdispatch.html#AsyncFD"><span class="Identifier">AsyncFD</span></a> <span class="Other">=</span> <span class="Keyword">distinct</span> <a href="system.html#int"><span class="Identifier">int</span></a></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L289"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L289" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="Callback">
<dt><pre><a href="asyncdispatch.html#Callback"><span class="Identifier">Callback</span></a> <span class="Other">=</span> <span class="Keyword">proc</span> <span class="Other">(</span><span class="Identifier">fd</span><span class="Other">:</span> <a href="asyncdispatch.html#AsyncFD"><span class="Identifier">AsyncFD</span></a><span class="Other">)</span><span class="Other">:</span> <a href="system.html#bool"><span class="Identifier">bool</span></a> {.<span class="Identifier">closure</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">gcsafe</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L304"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L304" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="CompletionData">
<dt><pre><a href="asyncdispatch.html#CompletionData"><span class="Identifier">CompletionData</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">fd</span><span class="Operator">*</span><span class="Other">:</span> <a href="asyncdispatch.html#AsyncFD"><span class="Identifier">AsyncFD</span></a>
  <span class="Identifier">cb</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">owned</span><span class="Other">(</span><span class="Keyword">proc</span> <span class="Other">(</span><span class="Identifier">fd</span><span class="Other">:</span> <a href="asyncdispatch.html#AsyncFD"><span class="Identifier">AsyncFD</span></a><span class="Other">;</span> <span class="Identifier">bytesTransferred</span><span class="Other">:</span> <a href="winlean.html#DWORD"><span class="Identifier">DWORD</span></a><span class="Other">;</span> <span class="Identifier">errcode</span><span class="Other">:</span> <a href="os.html#OSErrorCode"><span class="Identifier">OSErrorCode</span></a><span class="Other">)</span> {.
      <span class="Identifier">closure</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">gcsafe</span></span>.}<span class="Other">)</span>
  <span class="Identifier">cell</span><span class="Operator">*</span><span class="Other">:</span> <a href="system.html#ForeignCell"><span class="Identifier">ForeignCell</span></a>
</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L272"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L272" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="CustomRef">
<dt><pre><a href="asyncdispatch.html#CustomRef"><span class="Identifier">CustomRef</span></a> <span class="Other">=</span> <span class="Keyword">ref</span> <span class="Identifier">CustomObj</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L287"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L287" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="PDispatcher">
<dt><pre><a href="asyncdispatch.html#PDispatcher"><span class="Identifier">PDispatcher</span></a> <span class="Other">=</span> <span class="Keyword">ref</span> <span class="Keyword">object</span> <span class="Keyword">of</span> <span class="Identifier">PDispatcherBase</span>
  <span class="Identifier">ioPort</span><span class="Other">:</span> <a href="winlean.html#Handle"><span class="Identifier">Handle</span></a>
  <span class="Identifier">handles</span><span class="Operator">*</span><span class="Other">:</span> <a href="sets.html#HashSet"><span class="Identifier">HashSet</span></a><span class="Other">[</span><a href="asyncdispatch.html#AsyncFD"><span class="Identifier">AsyncFD</span></a><span class="Other">]</span>
</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L280"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L280" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</dl></div>
<div class="section" id="12">
<h1><a class="toc-backref" href="#12">Procs</a></h1>
<dl class="item">
<div id="==,AsyncFD,AsyncFD">
<dt><pre><span class="Keyword">proc</span> <a href="#%3D%3D%2CAsyncFD%2CAsyncFD"><span class="Identifier">`==`</span></a><span class="Other">(</span><span class="Identifier">x</span><span class="Other">:</span> <a href="asyncdispatch.html#AsyncFD"><span class="Identifier">AsyncFD</span></a><span class="Other">;</span> <span class="Identifier">y</span><span class="Other">:</span> <a href="asyncdispatch.html#AsyncFD"><span class="Identifier">AsyncFD</span></a><span class="Other">)</span><span class="Other">:</span> <a href="system.html#bool"><span class="Identifier">bool</span></a> {.<span class="Identifier">borrow</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L307"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L307" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="accept,AsyncFD">
<dt><pre><span class="Keyword">proc</span> <a href="#accept%2CAsyncFD"><span class="Identifier">accept</span></a><span class="Other">(</span><span class="Identifier">socket</span><span class="Other">:</span> <a href="asyncdispatch.html#AsyncFD"><span class="Identifier">AsyncFD</span></a><span class="Other">;</span> <span class="Identifier">flags</span> <span class="Other">=</span> <span class="Other">{</span><span class="Identifier">SafeDisconn</span><span class="Other">}</span><span class="Other">;</span>
            <span class="Identifier">inheritable</span> <span class="Other">=</span> <span class="Identifier">defined</span><span class="Other">(</span><span class="Identifier">nimInheritHandles</span><span class="Other">)</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">owned</span><span class="Other">(</span><a href="asyncfutures.html#Future"><span class="Identifier">Future</span></a><span class="Other">[</span><a href="asyncdispatch.html#AsyncFD"><span class="Identifier">AsyncFD</span></a><span class="Other">]</span><span class="Other">)</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<p>Accepts a new connection. Returns a future containing the client socket corresponding to that connection.</p>
<p>If <tt class="docutils literal"><span class="pre"><span class="Identifier">inheritable</span></span></tt> is false (the default), the resulting client socket will not be inheritable by child processes.</p>
<p>The future will complete when the connection is successfully accepted.</p>

&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L1893"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L1893" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="acceptAddr,AsyncFD">
<dt><pre><span class="Keyword">proc</span> <a href="#acceptAddr%2CAsyncFD"><span class="Identifier">acceptAddr</span></a><span class="Other">(</span><span class="Identifier">socket</span><span class="Other">:</span> <a href="asyncdispatch.html#AsyncFD"><span class="Identifier">AsyncFD</span></a><span class="Other">;</span> <span class="Identifier">flags</span> <span class="Other">=</span> <span class="Other">{</span><span class="Identifier">SafeDisconn</span><span class="Other">}</span><span class="Other">;</span>
                <span class="Identifier">inheritable</span> <span class="Other">=</span> <span class="Identifier">defined</span><span class="Other">(</span><span class="Identifier">nimInheritHandles</span><span class="Other">)</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">owned</span><span class="Other">(</span>
    <a href="asyncfutures.html#Future"><span class="Identifier">Future</span></a><span class="Other">[</span><span class="Keyword">tuple</span><span class="Other">[</span><span class="Identifier">address</span><span class="Other">:</span> <a href="system.html#string"><span class="Identifier">string</span></a><span class="Other">,</span> <span class="Identifier">client</span><span class="Other">:</span> <a href="asyncdispatch.html#AsyncFD"><span class="Identifier">AsyncFD</span></a><span class="Other">]</span><span class="Other">]</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">gcsafe</span><span class="Other">,</span>
    <span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">Exception</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<p>Accepts a new connection. Returns a future containing the client socket corresponding to that connection and the remote address of the client. The future will complete when the connection is successfully accepted.</p>
<p>The resulting client socket is automatically registered to the dispatcher.</p>
<p>If <tt class="docutils literal"><span class="pre"><span class="Identifier">inheritable</span></span></tt> is false (the default), the resulting client socket will not be inheritable by child processes.</p>
<p>The <tt class="docutils literal"><span class="pre"><span class="Identifier">accept</span></span></tt> call may result in an error if the connecting socket disconnects during the duration of the <tt class="docutils literal"><span class="pre"><span class="Identifier">accept</span></span></tt>. If the <tt class="docutils literal"><span class="pre"><span class="Identifier">SafeDisconn</span></span></tt> flag is specified then this error will not be raised and instead accept will be called again.</p>

&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L734"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L734" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="activeDescriptors">
<dt><pre><span class="Keyword">proc</span> <a href="#activeDescriptors"><span class="Identifier">activeDescriptors</span></a><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <a href="system.html#int"><span class="Identifier">int</span></a> {.<span class="Identifier">inline</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Returns the current number of active file descriptors for the current event loop. This is a cheap operation that does not involve a system call.
&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L1965"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L1965" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="addEvent,AsyncEvent,Callback">
<dt><pre><span class="Keyword">proc</span> <a href="#addEvent%2CAsyncEvent%2CCallback"><span class="Identifier">addEvent</span></a><span class="Other">(</span><span class="Identifier">ev</span><span class="Other">:</span> <a href="asyncdispatch.html#AsyncEvent"><span class="Identifier">AsyncEvent</span></a><span class="Other">;</span> <span class="Identifier">cb</span><span class="Other">:</span> <a href="asyncdispatch.html#Callback"><span class="Identifier">Callback</span></a><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Registers callback <tt class="docutils literal"><span class="pre"><span class="Identifier">cb</span></span></tt> to be called when <tt class="docutils literal"><span class="pre"><span class="Identifier">ev</span></span></tt> will be signaled
&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L1099"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L1099" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="addProcess,int,Callback">
<dt><pre><span class="Keyword">proc</span> <a href="#addProcess%2Cint%2CCallback"><span class="Identifier">addProcess</span></a><span class="Other">(</span><span class="Identifier">pid</span><span class="Other">:</span> <a href="system.html#int"><span class="Identifier">int</span></a><span class="Other">;</span> <span class="Identifier">cb</span><span class="Other">:</span> <a href="asyncdispatch.html#Callback"><span class="Identifier">Callback</span></a><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Registers callback <tt class="docutils literal"><span class="pre"><span class="Identifier">cb</span></span></tt> to be called when process with process ID <tt class="docutils literal"><span class="pre"><span class="Identifier">pid</span></span></tt> exited.
&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L1042"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L1042" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="addRead,AsyncFD,Callback">
<dt><pre><span class="Keyword">proc</span> <a href="#addRead%2CAsyncFD%2CCallback"><span class="Identifier">addRead</span></a><span class="Other">(</span><span class="Identifier">fd</span><span class="Other">:</span> <a href="asyncdispatch.html#AsyncFD"><span class="Identifier">AsyncFD</span></a><span class="Other">;</span> <span class="Identifier">cb</span><span class="Other">:</span> <a href="asyncdispatch.html#Callback"><span class="Identifier">Callback</span></a><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<p>Start watching the file descriptor for read availability and then call the callback <tt class="docutils literal"><span class="pre"><span class="Identifier">cb</span></span></tt>.</p>
<p>This is not <tt class="docutils literal"><span class="pre"><span class="Identifier">pure</span></span></tt> mechanism for Windows Completion Ports (IOCP), so if you can avoid it, please do it. Use <tt class="docutils literal"><span class="pre"><span class="Identifier">addRead</span></span></tt> only if really need it (main usecase is adaptation of unix-like libraries to be asynchronous on Windows).</p>
<p>If you use this function, you don't need to use asyncdispatch.recv() or asyncdispatch.accept(), because they are using IOCP, please use nativesockets.recv() and nativesockets.accept() instead.</p>
<p>Be sure your callback <tt class="docutils literal"><span class="pre"><span class="Identifier">cb</span></span></tt> returns <tt class="docutils literal"><span class="pre"><span class="Identifier">true</span></span></tt>, if you want to remove watch of <tt class="docutils literal"><span class="pre"><span class="Identifier">read</span></span></tt> notifications, and <tt class="docutils literal"><span class="pre"><span class="Identifier">false</span></span></tt>, if you want to continue receiving notifications.</p>

&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L937"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L937" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="addTimer,int,bool,Callback">
<dt><pre><span class="Keyword">proc</span> <a href="#addTimer%2Cint%2Cbool%2CCallback"><span class="Identifier">addTimer</span></a><span class="Other">(</span><span class="Identifier">timeout</span><span class="Other">:</span> <a href="system.html#int"><span class="Identifier">int</span></a><span class="Other">;</span> <span class="Identifier">oneshot</span><span class="Other">:</span> <a href="system.html#bool"><span class="Identifier">bool</span></a><span class="Other">;</span> <span class="Identifier">cb</span><span class="Other">:</span> <a href="asyncdispatch.html#Callback"><span class="Identifier">Callback</span></a><span class="Other">)</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<p>Registers callback <tt class="docutils literal"><span class="pre"><span class="Identifier">cb</span></span></tt> to be called when timer expired.</p>
<p>Parameters:</p>
<ul class="simple"><li><tt class="docutils literal"><span class="pre"><span class="Identifier">timeout</span></span></tt> - timeout value in milliseconds.</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">oneshot</span></span></tt><ul class="simple"><li><tt class="docutils literal"><span class="pre"><span class="Identifier">true</span></span></tt> - generate only one timeout event</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">false</span></span></tt> - generate timeout events periodically</li>
</ul>
</li>
</ul>

&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L1008"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L1008" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="addWrite,AsyncFD,Callback">
<dt><pre><span class="Keyword">proc</span> <a href="#addWrite%2CAsyncFD%2CCallback"><span class="Identifier">addWrite</span></a><span class="Other">(</span><span class="Identifier">fd</span><span class="Other">:</span> <a href="asyncdispatch.html#AsyncFD"><span class="Identifier">AsyncFD</span></a><span class="Other">;</span> <span class="Identifier">cb</span><span class="Other">:</span> <a href="asyncdispatch.html#Callback"><span class="Identifier">Callback</span></a><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<p>Start watching the file descriptor for write availability and then call the callback <tt class="docutils literal"><span class="pre"><span class="Identifier">cb</span></span></tt>.</p>
<p>This is not <tt class="docutils literal"><span class="pre"><span class="Identifier">pure</span></span></tt> mechanism for Windows Completion Ports (IOCP), so if you can avoid it, please do it. Use <tt class="docutils literal"><span class="pre"><span class="Identifier">addWrite</span></span></tt> only if really need it (main usecase is adaptation of unix-like libraries to be asynchronous on Windows).</p>
<p>If you use this function, you don't need to use asyncdispatch.send() or asyncdispatch.connect(), because they are using IOCP, please use nativesockets.send() and nativesockets.connect() instead.</p>
<p>Be sure your callback <tt class="docutils literal"><span class="pre"><span class="Identifier">cb</span></span></tt> returns <tt class="docutils literal"><span class="pre"><span class="Identifier">true</span></span></tt>, if you want to remove watch of <tt class="docutils literal"><span class="pre"><span class="Identifier">write</span></span></tt> notifications, and <tt class="docutils literal"><span class="pre"><span class="Identifier">false</span></span></tt>, if you want to continue receiving notifications.</p>

&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L955"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L955" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="callSoon,proc)">
<dt><pre><span class="Keyword">proc</span> <a href="#callSoon%2Cproc%29"><span class="Identifier">callSoon</span></a><span class="Other">(</span><span class="Identifier">cbproc</span><span class="Other">:</span> <span class="Keyword">proc</span> <span class="Other">(</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">gcsafe</span></span>.}<span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">gcsafe</span><span class="Other">,</span> <span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Schedule <tt class="docutils literal"><span class="pre"><span class="Identifier">cbproc</span></span></tt> to be called as soon as possible. The callback is called when control returns to the event loop.
&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L1950"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L1950" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="close,AsyncEvent">
<dt><pre><span class="Keyword">proc</span> <a href="#close%2CAsyncEvent"><span class="Identifier">close</span></a><span class="Other">(</span><span class="Identifier">ev</span><span class="Other">:</span> <a href="asyncdispatch.html#AsyncEvent"><span class="Identifier">AsyncEvent</span></a><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">OSError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Closes event <tt class="docutils literal"><span class="pre"><span class="Identifier">ev</span></span></tt>.
&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L1092"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L1092" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="closeSocket,AsyncFD">
<dt><pre><span class="Keyword">proc</span> <a href="#closeSocket%2CAsyncFD"><span class="Identifier">closeSocket</span></a><span class="Other">(</span><span class="Identifier">socket</span><span class="Other">:</span> <a href="asyncdispatch.html#AsyncFD"><span class="Identifier">AsyncFD</span></a><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Closes a socket and ensures that it is unregistered.
&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L833"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L833" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="connect,AsyncFD,string,Port">
<dt><pre><span class="Keyword">proc</span> <a href="#connect%2CAsyncFD%2Cstring%2CPort"><span class="Identifier">connect</span></a><span class="Other">(</span><span class="Identifier">socket</span><span class="Other">:</span> <a href="asyncdispatch.html#AsyncFD"><span class="Identifier">AsyncFD</span></a><span class="Other">;</span> <span class="Identifier">address</span><span class="Other">:</span> <a href="system.html#string"><span class="Identifier">string</span></a><span class="Other">;</span> <span class="Identifier">port</span><span class="Other">:</span> <a href="nativesockets.html#Port"><span class="Identifier">Port</span></a><span class="Other">;</span>
             <span class="Identifier">domain</span> <span class="Other">=</span> <a href="nativesockets.html#Domain"><span class="Identifier">Domain</span></a><span class="Other">.</span><span class="Identifier">AF_INET</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">owned</span><span class="Other">(</span><a href="asyncfutures.html#Future"><span class="Identifier">Future</span></a><span class="Other">[</span><a href="system.html#void"><span class="Identifier">void</span></a><span class="Other">]</span><span class="Other">)</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">IOError</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">,</span> <span class="Identifier">Exception</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L1844"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L1844" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="contains,PDispatcher,AsyncFD">
<dt><pre><span class="Keyword">proc</span> <a href="#contains%2CPDispatcher%2CAsyncFD"><span class="Identifier">contains</span></a><span class="Other">(</span><span class="Identifier">disp</span><span class="Other">:</span> <a href="asyncdispatch.html#PDispatcher"><span class="Identifier">PDispatcher</span></a><span class="Other">;</span> <span class="Identifier">fd</span><span class="Other">:</span> <a href="asyncdispatch.html#AsyncFD"><span class="Identifier">AsyncFD</span></a><span class="Other">)</span><span class="Other">:</span> <a href="system.html#bool"><span class="Identifier">bool</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L842"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L842" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="createAsyncNativeSocket,cint,cint,cint">
<dt><pre><span class="Keyword">proc</span> <a href="#createAsyncNativeSocket%2Ccint%2Ccint%2Ccint"><span class="Identifier">createAsyncNativeSocket</span></a><span class="Other">(</span><span class="Identifier">domain</span><span class="Other">:</span> <a href="system.html#cint"><span class="Identifier">cint</span></a><span class="Other">;</span> <span class="Identifier">sockType</span><span class="Other">:</span> <a href="system.html#cint"><span class="Identifier">cint</span></a><span class="Other">;</span> <span class="Identifier">protocol</span><span class="Other">:</span> <a href="system.html#cint"><span class="Identifier">cint</span></a><span class="Other">;</span>
                             <span class="Identifier">inheritable</span> <span class="Other">=</span> <span class="Identifier">defined</span><span class="Other">(</span><span class="Identifier">nimInheritHandles</span><span class="Other">)</span><span class="Other">)</span><span class="Other">:</span> <a href="asyncdispatch.html#AsyncFD"><span class="Identifier">AsyncFD</span></a> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">Exception</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L1666"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L1666" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="createAsyncNativeSocket,Domain,SockType,Protocol">
<dt><pre><span class="Keyword">proc</span> <a href="#createAsyncNativeSocket%2CDomain%2CSockType%2CProtocol"><span class="Identifier">createAsyncNativeSocket</span></a><span class="Other">(</span><span class="Identifier">domain</span><span class="Other">:</span> <a href="nativesockets.html#Domain"><span class="Identifier">Domain</span></a> <span class="Other">=</span> <a href="nativesockets.html#Domain"><span class="Identifier">Domain</span></a><span class="Other">.</span><span class="Identifier">AF_INET</span><span class="Other">;</span>
                             <span class="Identifier">sockType</span><span class="Other">:</span> <a href="nativesockets.html#SockType"><span class="Identifier">SockType</span></a> <span class="Other">=</span> <span class="Identifier">SOCK_STREAM</span><span class="Other">;</span>
                             <span class="Identifier">protocol</span><span class="Other">:</span> <a href="nativesockets.html#Protocol"><span class="Identifier">Protocol</span></a> <span class="Other">=</span> <span class="Identifier">IPPROTO_TCP</span><span class="Other">;</span>
                             <span class="Identifier">inheritable</span> <span class="Other">=</span> <span class="Identifier">defined</span><span class="Other">(</span><span class="Identifier">nimInheritHandles</span><span class="Other">)</span><span class="Other">)</span><span class="Other">:</span> <a href="asyncdispatch.html#AsyncFD"><span class="Identifier">AsyncFD</span></a> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">Exception</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L1671"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L1671" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="dial,string,Port,Protocol">
<dt><pre><span class="Keyword">proc</span> <a href="#dial%2Cstring%2CPort%2CProtocol"><span class="Identifier">dial</span></a><span class="Other">(</span><span class="Identifier">address</span><span class="Other">:</span> <a href="system.html#string"><span class="Identifier">string</span></a><span class="Other">;</span> <span class="Identifier">port</span><span class="Other">:</span> <a href="nativesockets.html#Port"><span class="Identifier">Port</span></a><span class="Other">;</span> <span class="Identifier">protocol</span><span class="Other">:</span> <a href="nativesockets.html#Protocol"><span class="Identifier">Protocol</span></a> <span class="Other">=</span> <span class="Identifier">IPPROTO_TCP</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">owned</span><span class="Other">(</span>
    <a href="asyncfutures.html#Future"><span class="Identifier">Future</span></a><span class="Other">[</span><a href="asyncdispatch.html#AsyncFD"><span class="Identifier">AsyncFD</span></a><span class="Other">]</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">OSError</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">,</span> <span class="Identifier">Exception</span><span class="Other">]</span><span class="Other">,</span>
                       <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Establishes connection to the specified <tt class="docutils literal"><span class="pre"><span class="Identifier">address</span></span></tt>:<tt class="docutils literal"><span class="pre"><span class="Identifier">port</span></span></tt> pair via the specified protocol. The procedure iterates through possible resolutions of the <tt class="docutils literal"><span class="pre"><span class="Identifier">address</span></span></tt> until it succeeds, meaning that it seamlessly works with both IPv4 and IPv6. Returns the async file descriptor, registered in the dispatcher of the current thread, ready to send or receive data.
&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L1829"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L1829" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="drain,int">
<dt><pre><span class="Keyword">proc</span> <a href="#drain%2Cint"><span class="Identifier">drain</span></a><span class="Other">(</span><span class="Identifier">timeout</span> <span class="Other">=</span> <span class="DecNumber">500</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">]</span><span class="Other">,</span>
                            <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">TimeEffect</span><span class="Other">,</span> <span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Waits for completion of <strong>all</strong> events and processes them. Raises <tt class="docutils literal"><span class="pre"><span class="Identifier">ValueError</span></span></tt> if there are no pending operations. In contrast to <tt class="docutils literal"><span class="pre"><span class="Identifier">poll</span></span></tt> this processes as many events as are available until the timeout has elapsed.
&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L1637"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L1637" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="getGlobalDispatcher">
<dt><pre><span class="Keyword">proc</span> <a href="#getGlobalDispatcher"><span class="Identifier">getGlobalDispatcher</span></a><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <a href="asyncdispatch.html#PDispatcher"><span class="Identifier">PDispatcher</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L325"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L325" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="getIoHandler,PDispatcher">
<dt><pre><span class="Keyword">proc</span> <a href="#getIoHandler%2CPDispatcher"><span class="Identifier">getIoHandler</span></a><span class="Other">(</span><span class="Identifier">disp</span><span class="Other">:</span> <a href="asyncdispatch.html#PDispatcher"><span class="Identifier">PDispatcher</span></a><span class="Other">)</span><span class="Other">:</span> <a href="winlean.html#Handle"><span class="Identifier">Handle</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Returns the underlying IO Completion Port handle (Windows) or selector (Unix) for the specified dispatcher.
&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L330"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L330" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="hasPendingOperations">
<dt><pre><span class="Keyword">proc</span> <a href="#hasPendingOperations"><span class="Identifier">hasPendingOperations</span></a><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <a href="system.html#bool"><span class="Identifier">bool</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Returns <tt class="docutils literal"><span class="pre"><span class="Identifier">true</span></span></tt> if the global dispatcher has pending operations.
&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L353"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L353" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="maxDescriptors">
<dt><pre><span class="Keyword">proc</span> <a href="#maxDescriptors"><span class="Identifier">maxDescriptors</span></a><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <a href="system.html#int"><span class="Identifier">int</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <a href="system.html#OSError"><span class="Identifier">OSError</span></a><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Returns the maximum number of active file descriptors for the current process. This involves a system call. For now <tt class="docutils literal"><span class="pre"><span class="Identifier">maxDescriptors</span></span></tt> is supported on the following OSes: Windows, Linux, OSX, BSD.
&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L1978"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L1978" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="newAsyncEvent">
<dt><pre><span class="Keyword">proc</span> <a href="#newAsyncEvent"><span class="Identifier">newAsyncEvent</span></a><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <a href="asyncdispatch.html#AsyncEvent"><span class="Identifier">AsyncEvent</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">OSError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<p>Creates a new thread-safe <tt class="docutils literal"><span class="pre"><span class="Identifier">AsyncEvent</span></span></tt> object.</p>
<p>New <tt class="docutils literal"><span class="pre"><span class="Identifier">AsyncEvent</span></span></tt> object is not automatically registered with dispatcher like <tt class="docutils literal"><span class="pre"><span class="Identifier">AsyncSocket</span></span></tt>.</p>

&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L1061"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L1061" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="newCustom">
<dt><pre><span class="Keyword">proc</span> <a href="#newCustom"><span class="Identifier">newCustom</span></a><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <a href="asyncdispatch.html#CustomRef"><span class="Identifier">CustomRef</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L450"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L450" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="newDispatcher">
<dt><pre><span class="Keyword">proc</span> <a href="#newDispatcher"><span class="Identifier">newDispatcher</span></a><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">owned</span> <span class="Identifier">PDispatcher</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Creates a new Dispatcher instance.
&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L309"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L309" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="poll,int">
<dt><pre><span class="Keyword">proc</span> <a href="#poll%2Cint"><span class="Identifier">poll</span></a><span class="Other">(</span><span class="Identifier">timeout</span> <span class="Other">=</span> <span class="DecNumber">500</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">]</span><span class="Other">,</span>
                           <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">,</span> <span class="Identifier">TimeEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Waits for completion events and processes them. Raises <tt class="docutils literal"><span class="pre"><span class="Identifier">ValueError</span></span></tt> if there are no pending operations. This runs the underlying OS <span id="epoll_1">epoll</span> or <span id="kqueue_1">kqueue</span> primitive only once.
&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L1649"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L1649" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="readAll,FutureStream[string]">
<dt><pre><span class="Keyword">proc</span> <a href="#readAll%2CFutureStream%5Bstring%5D"><span class="Identifier">readAll</span></a><span class="Other">(</span><span class="Identifier">future</span><span class="Other">:</span> <a href="asyncstreams.html#FutureStream"><span class="Identifier">FutureStream</span></a><span class="Other">[</span><a href="system.html#string"><span class="Identifier">string</span></a><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">owned</span><span class="Other">(</span><a href="asyncfutures.html#Future"><span class="Identifier">Future</span></a><span class="Other">[</span><a href="system.html#string"><span class="Identifier">string</span></a><span class="Other">]</span><span class="Other">)</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Returns a future that will complete when all the string data from the specified future stream is retrieved.
&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L1939"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L1939" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="recv,AsyncFD,int">
<dt><pre><span class="Keyword">proc</span> <a href="#recv%2CAsyncFD%2Cint"><span class="Identifier">recv</span></a><span class="Other">(</span><span class="Identifier">socket</span><span class="Other">:</span> <a href="asyncdispatch.html#AsyncFD"><span class="Identifier">AsyncFD</span></a><span class="Other">;</span> <span class="Identifier">size</span><span class="Other">:</span> <a href="system.html#int"><span class="Identifier">int</span></a><span class="Other">;</span> <span class="Identifier">flags</span> <span class="Other">=</span> <span class="Other">{</span><span class="Identifier">SafeDisconn</span><span class="Other">}</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">owned</span><span class="Other">(</span>
    <a href="asyncfutures.html#Future"><span class="Identifier">Future</span></a><span class="Other">[</span><a href="system.html#string"><span class="Identifier">string</span></a><span class="Other">]</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Reads <strong>up to</strong> <tt class="docutils literal"><span class="pre"><span class="Identifier">size</span></span></tt> bytes from <tt class="docutils literal"><span class="pre"><span class="Identifier">socket</span></span></tt>. Returned future will complete once all the data requested is read, a part of the data has been read, or the socket has disconnected in which case the future will complete with a value of <tt class="docutils literal"><span class="pre"><span class="StringLit">&quot;&quot;</span></span></tt>.<div class="admonition admonition-warning"><span class="admonition-warning-text"><b>Warning:</b></span>
The <tt class="docutils literal"><span class="pre"><span class="Identifier">Peek</span></span></tt> socket flag is not supported on Windows.</div>

&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L457"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L457" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="recvFromInto,AsyncFD,pointer,int,ptr.SockAddr,ptr.SockLen">
<dt><pre><span class="Keyword">proc</span> <a href="#recvFromInto%2CAsyncFD%2Cpointer%2Cint%2Cptr.SockAddr%2Cptr.SockLen"><span class="Identifier">recvFromInto</span></a><span class="Other">(</span><span class="Identifier">socket</span><span class="Other">:</span> <a href="asyncdispatch.html#AsyncFD"><span class="Identifier">AsyncFD</span></a><span class="Other">;</span> <span class="Identifier">data</span><span class="Other">:</span> <a href="system.html#pointer"><span class="Identifier">pointer</span></a><span class="Other">;</span> <span class="Identifier">size</span><span class="Other">:</span> <a href="system.html#int"><span class="Identifier">int</span></a><span class="Other">;</span>
                  <span class="Identifier">saddr</span><span class="Other">:</span> <span class="Keyword">ptr</span> <a href="winlean.html#SockAddr"><span class="Identifier">SockAddr</span></a><span class="Other">;</span> <span class="Identifier">saddrLen</span><span class="Other">:</span> <span class="Keyword">ptr</span> <a href="winlean.html#SockLen"><span class="Identifier">SockLen</span></a><span class="Other">;</span>
                  <span class="Identifier">flags</span> <span class="Other">=</span> <span class="Other">{</span><span class="Identifier">SafeDisconn</span><span class="Other">}</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">owned</span><span class="Other">(</span><a href="asyncfutures.html#Future"><span class="Identifier">Future</span></a><span class="Other">[</span><a href="system.html#int"><span class="Identifier">int</span></a><span class="Other">]</span><span class="Other">)</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Receives a datagram data from <tt class="docutils literal"><span class="pre"><span class="Identifier">socket</span></span></tt> into <tt class="docutils literal"><span class="pre"><span class="Identifier">buf</span></span></tt>, which must be at least of size <tt class="docutils literal"><span class="pre"><span class="Identifier">size</span></span></tt>, address of datagram's sender will be stored into <tt class="docutils literal"><span class="pre"><span class="Identifier">saddr</span></span></tt> and <tt class="docutils literal"><span class="pre"><span class="Identifier">saddrLen</span></span></tt>. Returned future will complete once one datagram has been received, and will return size of packet received.
&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L686"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L686" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="recvInto,AsyncFD,pointer,int">
<dt><pre><span class="Keyword">proc</span> <a href="#recvInto%2CAsyncFD%2Cpointer%2Cint"><span class="Identifier">recvInto</span></a><span class="Other">(</span><span class="Identifier">socket</span><span class="Other">:</span> <a href="asyncdispatch.html#AsyncFD"><span class="Identifier">AsyncFD</span></a><span class="Other">;</span> <span class="Identifier">buf</span><span class="Other">:</span> <a href="system.html#pointer"><span class="Identifier">pointer</span></a><span class="Other">;</span> <span class="Identifier">size</span><span class="Other">:</span> <a href="system.html#int"><span class="Identifier">int</span></a><span class="Other">;</span> <span class="Identifier">flags</span> <span class="Other">=</span> <span class="Other">{</span><span class="Identifier">SafeDisconn</span><span class="Other">}</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">owned</span><span class="Other">(</span>
    <a href="asyncfutures.html#Future"><span class="Identifier">Future</span></a><span class="Other">[</span><a href="system.html#int"><span class="Identifier">int</span></a><span class="Other">]</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Reads <strong>up to</strong> <tt class="docutils literal"><span class="pre"><span class="Identifier">size</span></span></tt> bytes from <tt class="docutils literal"><span class="pre"><span class="Identifier">socket</span></span></tt> into <tt class="docutils literal"><span class="pre"><span class="Identifier">buf</span></span></tt>, which must at least be of that size. Returned future will complete once all the data requested is read, a part of the data has been read, or the socket has disconnected in which case the future will complete with a value of <tt class="docutils literal"><span class="pre"><span class="DecNumber">0</span></span></tt>.<div class="admonition admonition-warning"><span class="admonition-warning-text"><b>Warning:</b></span>
The <tt class="docutils literal"><span class="pre"><span class="Identifier">Peek</span></span></tt> socket flag is not supported on Windows.</div>

&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L530"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L530" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="register,AsyncFD">
<dt><pre><span class="Keyword">proc</span> <a href="#register%2CAsyncFD"><span class="Identifier">register</span></a><span class="Other">(</span><span class="Identifier">fd</span><span class="Other">:</span> <a href="asyncdispatch.html#AsyncFD"><span class="Identifier">AsyncFD</span></a><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Registers <tt class="docutils literal"><span class="pre"><span class="Identifier">fd</span></span></tt> with the dispatcher.
&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L335"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L335" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="runForever">
<dt><pre><span class="Keyword">proc</span> <a href="#runForever"><span class="Identifier">runForever</span></a><span class="Other">(</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">]</span><span class="Other">,</span>
                    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">,</span> <span class="Identifier">TimeEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Begins a never ending global dispatcher poll loop.
&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L1953"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L1953" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="send,AsyncFD,pointer,int">
<dt><pre><span class="Keyword">proc</span> <a href="#send%2CAsyncFD%2Cpointer%2Cint"><span class="Identifier">send</span></a><span class="Other">(</span><span class="Identifier">socket</span><span class="Other">:</span> <a href="asyncdispatch.html#AsyncFD"><span class="Identifier">AsyncFD</span></a><span class="Other">;</span> <span class="Identifier">buf</span><span class="Other">:</span> <a href="system.html#pointer"><span class="Identifier">pointer</span></a><span class="Other">;</span> <span class="Identifier">size</span><span class="Other">:</span> <a href="system.html#int"><span class="Identifier">int</span></a><span class="Other">;</span> <span class="Identifier">flags</span> <span class="Other">=</span> <span class="Other">{</span><span class="Identifier">SafeDisconn</span><span class="Other">}</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">owned</span><span class="Other">(</span>
    <a href="asyncfutures.html#Future"><span class="Identifier">Future</span></a><span class="Other">[</span><a href="system.html#void"><span class="Identifier">void</span></a><span class="Other">]</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Sends <tt class="docutils literal"><span class="pre"><span class="Identifier">size</span></span></tt> bytes from <tt class="docutils literal"><span class="pre"><span class="Identifier">buf</span></span></tt> to <tt class="docutils literal"><span class="pre"><span class="Identifier">socket</span></span></tt>. The returned future will complete once all data has been sent.<div class="admonition admonition-warning"><span class="admonition-warning-text"><b>Warning:</b></span>
Use it with caution. If <tt class="docutils literal"><span class="pre"><span class="Identifier">buf</span></span></tt> refers to GC'ed object, you must use GC_ref/GC_unref calls to avoid early freeing of the buffer.</div>

&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L596"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L596" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="send,AsyncFD,string">
<dt><pre><span class="Keyword">proc</span> <a href="#send%2CAsyncFD%2Cstring"><span class="Identifier">send</span></a><span class="Other">(</span><span class="Identifier">socket</span><span class="Other">:</span> <a href="asyncdispatch.html#AsyncFD"><span class="Identifier">AsyncFD</span></a><span class="Other">;</span> <span class="Identifier">data</span><span class="Other">:</span> <a href="system.html#string"><span class="Identifier">string</span></a><span class="Other">;</span> <span class="Identifier">flags</span> <span class="Other">=</span> <span class="Other">{</span><span class="Identifier">SafeDisconn</span><span class="Other">}</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">owned</span><span class="Other">(</span>
    <a href="asyncfutures.html#Future"><span class="Identifier">Future</span></a><span class="Other">[</span><a href="system.html#void"><span class="Identifier">void</span></a><span class="Other">]</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Sends <tt class="docutils literal"><span class="pre"><span class="Identifier">data</span></span></tt> to <tt class="docutils literal"><span class="pre"><span class="Identifier">socket</span></span></tt>. The returned future will complete once all data has been sent.
&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L1917"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L1917" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="sendTo,AsyncFD,pointer,int,ptr.SockAddr,SockLen">
<dt><pre><span class="Keyword">proc</span> <a href="#sendTo%2CAsyncFD%2Cpointer%2Cint%2Cptr.SockAddr%2CSockLen"><span class="Identifier">sendTo</span></a><span class="Other">(</span><span class="Identifier">socket</span><span class="Other">:</span> <a href="asyncdispatch.html#AsyncFD"><span class="Identifier">AsyncFD</span></a><span class="Other">;</span> <span class="Identifier">data</span><span class="Other">:</span> <a href="system.html#pointer"><span class="Identifier">pointer</span></a><span class="Other">;</span> <span class="Identifier">size</span><span class="Other">:</span> <a href="system.html#int"><span class="Identifier">int</span></a><span class="Other">;</span> <span class="Identifier">saddr</span><span class="Other">:</span> <span class="Keyword">ptr</span> <a href="winlean.html#SockAddr"><span class="Identifier">SockAddr</span></a><span class="Other">;</span>
            <span class="Identifier">saddrLen</span><span class="Other">:</span> <a href="winlean.html#SockLen"><span class="Identifier">SockLen</span></a><span class="Other">;</span> <span class="Identifier">flags</span> <span class="Other">=</span> <span class="Other">{</span><span class="Identifier">SafeDisconn</span><span class="Other">}</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">owned</span><span class="Other">(</span><a href="asyncfutures.html#Future"><span class="Identifier">Future</span></a><span class="Other">[</span><a href="system.html#void"><span class="Identifier">void</span></a><span class="Other">]</span><span class="Other">)</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Sends <tt class="docutils literal"><span class="pre"><span class="Identifier">data</span></span></tt> to specified destination <tt class="docutils literal"><span class="pre"><span class="Identifier">saddr</span></span></tt>, using socket <tt class="docutils literal"><span class="pre"><span class="Identifier">socket</span></span></tt>. The returned future will complete once all data has been sent.
&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L641"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L641" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="setGlobalDispatcher,sinkPDispatcher">
<dt><pre><span class="Keyword">proc</span> <a href="#setGlobalDispatcher%2CsinkPDispatcher"><span class="Identifier">setGlobalDispatcher</span></a><span class="Other">(</span><span class="Identifier">disp</span><span class="Other">:</span> <a href="system.html#sink"><span class="Identifier">sink</span></a> <a href="asyncdispatch.html#PDispatcher"><span class="Identifier">PDispatcher</span></a><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L319"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L319" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="setInheritable,AsyncFD,bool">
<dt><pre><span class="Keyword">proc</span> <a href="#setInheritable%2CAsyncFD%2Cbool"><span class="Identifier">setInheritable</span></a><span class="Other">(</span><span class="Identifier">fd</span><span class="Other">:</span> <a href="asyncdispatch.html#AsyncFD"><span class="Identifier">AsyncFD</span></a><span class="Other">;</span> <span class="Identifier">inheritable</span><span class="Other">:</span> <a href="system.html#bool"><span class="Identifier">bool</span></a><span class="Other">)</span><span class="Other">:</span> <a href="system.html#bool"><span class="Identifier">bool</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<p>Control whether a file handle can be inherited by child processes. Returns <tt class="docutils literal"><span class="pre"><span class="Identifier">true</span></span></tt> on success.</p>
<p>This procedure is not guaranteed to be available for all platforms. Test for availability with <a class="reference external" href="system.html#declared,untyped">declared()</a>.</p>

&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L831"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L831" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="sleepAsync">
<dt><pre><span class="Keyword">proc</span> <a href="#sleepAsync"><span class="Identifier">sleepAsync</span></a><span class="Other">(</span><span class="Identifier">ms</span><span class="Other">:</span> <a href="system.html#int"><span class="Identifier">int</span></a> <span class="Operator">|</span> <a href="system.html#float"><span class="Identifier">float</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">owned</span><span class="Other">(</span><a href="asyncfutures.html#Future"><span class="Identifier">Future</span></a><span class="Other">[</span><a href="system.html#void"><span class="Identifier">void</span></a><span class="Other">]</span><span class="Other">)</span></pre></dt>
<dd>

Suspends the execution of the current async procedure for the next <tt class="docutils literal"><span class="pre"><span class="Identifier">ms</span></span></tt> milliseconds.
&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L1859"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L1859" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="trigger,AsyncEvent">
<dt><pre><span class="Keyword">proc</span> <a href="#trigger%2CAsyncEvent"><span class="Identifier">trigger</span></a><span class="Other">(</span><span class="Identifier">ev</span><span class="Other">:</span> <a href="asyncdispatch.html#AsyncEvent"><span class="Identifier">AsyncEvent</span></a><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">OSError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Set event <tt class="docutils literal"><span class="pre"><span class="Identifier">ev</span></span></tt> to signaled state.
&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L1076"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L1076" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="unregister,AsyncEvent">
<dt><pre><span class="Keyword">proc</span> <a href="#unregister%2CAsyncEvent"><span class="Identifier">unregister</span></a><span class="Other">(</span><span class="Identifier">ev</span><span class="Other">:</span> <a href="asyncdispatch.html#AsyncEvent"><span class="Identifier">AsyncEvent</span></a><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">OSError</span><span class="Other">]</span><span class="Other">,</span>
                                  <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Unregisters event <tt class="docutils literal"><span class="pre"><span class="Identifier">ev</span></span></tt>.
&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L1081"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L1081" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="unregister,AsyncFD">
<dt><pre><span class="Keyword">proc</span> <a href="#unregister%2CAsyncFD"><span class="Identifier">unregister</span></a><span class="Other">(</span><span class="Identifier">fd</span><span class="Other">:</span> <a href="asyncdispatch.html#AsyncFD"><span class="Identifier">AsyncFD</span></a><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Unregisters <tt class="docutils literal"><span class="pre"><span class="Identifier">fd</span></span></tt>.
&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L838"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L838" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="waitFor,Future[T]">
<dt><pre><span class="Keyword">proc</span> <a href="#waitFor%2CFuture%5BT%5D"><span class="Identifier">waitFor</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">fut</span><span class="Other">:</span> <a href="asyncfutures.html#Future"><span class="Identifier">Future</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">T</span></pre></dt>
<dd>

<strong>Blocks</strong> the current thread until the specified future completes.
&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L1958"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L1958" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="withTimeout,Future[T],int">
<dt><pre><span class="Keyword">proc</span> <a href="#withTimeout%2CFuture%5BT%5D%2Cint"><span class="Identifier">withTimeout</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">fut</span><span class="Other">:</span> <a href="asyncfutures.html#Future"><span class="Identifier">Future</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">timeout</span><span class="Other">:</span> <a href="system.html#int"><span class="Identifier">int</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">owned</span><span class="Other">(</span><a href="asyncfutures.html#Future"><span class="Identifier">Future</span></a><span class="Other">[</span><a href="system.html#bool"><span class="Identifier">bool</span></a><span class="Other">]</span><span class="Other">)</span></pre></dt>
<dd>

<p>Returns a future which will complete once <tt class="docutils literal"><span class="pre"><span class="Identifier">fut</span></span></tt> completes or after <tt class="docutils literal"><span class="pre"><span class="Identifier">timeout</span></span></tt> milliseconds has elapsed.</p>
<p>If <tt class="docutils literal"><span class="pre"><span class="Identifier">fut</span></span></tt> completes first the returned future will hold true, otherwise, if <tt class="docutils literal"><span class="pre"><span class="Identifier">timeout</span></span></tt> milliseconds has elapsed first, the returned future will hold false.</p>

&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncdispatch.nim#L1871"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncdispatch.nim#L1871" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</dl></div>
<div class="section" id="17">
<h1><a class="toc-backref" href="#17">Macros</a></h1>
<dl class="item">
<div id="async.m,untyped">
<dt><pre><span class="Keyword">macro</span> <a href="#async.m%2Cuntyped"><span class="Identifier">async</span></a><span class="Other">(</span><span class="Identifier">prc</span><span class="Other">:</span> <a href="system.html#untyped"><span class="Identifier">untyped</span></a><span class="Other">)</span><span class="Other">:</span> <a href="system.html#untyped"><span class="Identifier">untyped</span></a></pre></dt>
<dd>

Macro which processes async procedures into the appropriate iterators and yield statements.
&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncmacro.nim#L253"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncmacro.nim#L253" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="multisync.m,untyped">
<dt><pre><span class="Keyword">macro</span> <a href="#multisync.m%2Cuntyped"><span class="Identifier">multisync</span></a><span class="Other">(</span><span class="Identifier">prc</span><span class="Other">:</span> <a href="system.html#untyped"><span class="Identifier">untyped</span></a><span class="Other">)</span><span class="Other">:</span> <a href="system.html#untyped"><span class="Identifier">untyped</span></a></pre></dt>
<dd>

<p>Macro which processes async procedures into both asynchronous and synchronous procedures.</p>
<p>The generated async procedures use the <tt class="docutils literal"><span class="pre"><span class="Identifier">async</span></span></tt> macro, whereas the generated synchronous procedures simply strip off the <tt class="docutils literal"><span class="pre"><span class="Identifier">await</span></span></tt> calls.</p>

&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncmacro.nim#L312"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncmacro.nim#L312" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</dl></div>
<div class="section" id="18">
<h1><a class="toc-backref" href="#18">Templates</a></h1>
<dl class="item">
<div id="await.t,typed">
<dt><pre><span class="Keyword">template</span> <a href="#await.t%2Ctyped"><span class="Identifier">await</span></a><span class="Other">(</span><span class="Identifier">f</span><span class="Other">:</span> <a href="system.html#typed"><span class="Identifier">typed</span></a><span class="Other">)</span><span class="Other">:</span> <a href="system.html#untyped"><span class="Identifier">untyped</span></a> {.<span class="Identifier">used</span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncmacro.nim#L124"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncmacro.nim#L124" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="await.t,Future[T]">
<dt><pre><span class="Keyword">template</span> <a href="#await.t%2CFuture%5BT%5D"><span class="Identifier">await</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">f</span><span class="Other">:</span> <a href="asyncfutures.html#Future"><span class="Identifier">Future</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <a href="system.html#auto"><span class="Identifier">auto</span></a> {.<span class="Identifier">used</span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/nim-lang/Nim/tree/devel/lib/pure/asyncmacro.nim#L128"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncmacro.nim#L128" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</dl></div>
<div class="section" id="19">
<h1><a class="toc-backref" href="#19">Exports</a></h1>
<dl class="item">
<a href="nativesockets.html#Port"><span class="Identifier">Port</span></a>, <a href="net.html#SocketFlag"><span class="Identifier">SocketFlag</span></a>, <a href="asyncfutures.html#and,Future[T],Future[Y]"><span class="Identifier">and</span></a>, <a href="asyncfutures.html#addCallback,FutureBase,proc)"><span class="Identifier">addCallback</span></a>, <a href="asyncfutures.html#asyncCheck,Future[T]"><span class="Identifier">asyncCheck</span></a>, <a href="asyncfutures.html#or,Future[T],Future[Y]"><span class="Identifier">or</span></a>, <a href="asyncfutures.html#read"><span class="Identifier">read</span></a>, <a href="asyncfutures.html#fail,Future[T],ref.Exception"><span class="Identifier">fail</span></a>, <a href="asyncfutures.html#setCallSoonProc"><span class="Identifier">setCallSoonProc</span></a>, <a href="asyncfutures.html#addCallback,Future[T],proc(Future[T])"><span class="Identifier">addCallback</span></a>, <a href="asyncfutures.html#clean,FutureVar[T]"><span class="Identifier">clean</span></a>, <a href="asyncfutures.html#clearCallbacks,FutureBase"><span class="Identifier">clearCallbacks</span></a>, <a href="asyncfutures.html#newFutureVar,string"><span class="Identifier">newFutureVar</span></a>, <a href="asyncfutures.html#mget,FutureVar[T]"><span class="Identifier">mget</span></a>, <a href="asyncfutures.html#Future"><span class="Identifier">Future</span></a>, <a href="asyncfutures.html#failed,FutureBase"><span class="Identifier">failed</span></a>, <a href="asyncfutures.html#$,seq[StackTraceEntry]"><span class="Identifier">$</span></a>, <a href="asyncfutures.html#callback=,FutureBase,proc)"><span class="Identifier">callback=</span></a>, <a href="asyncfutures.html#complete,FutureVar[T],T"><span class="Identifier">complete</span></a>, <a href="asyncfutures.html#callback=,Future[T],proc(Future[T])"><span class="Identifier">callback=</span></a>, <a href="asyncfutures.html#NimAsyncContinueSuffix"><span class="Identifier">NimAsyncContinueSuffix</span></a>, <a href="asyncfutures.html#FutureBase"><span class="Identifier">FutureBase</span></a>, <a href="asyncfutures.html#all,varargs[Future[T]]"><span class="Identifier">all</span></a>, <a href="asyncfutures.html#complete,FutureVar[T]"><span class="Identifier">complete</span></a>, <a href="asyncfutures.html#FutureError"><span class="Identifier">FutureError</span></a>, <a href="asyncfutures.html#getCallSoonProc"><span class="Identifier">getCallSoonProc</span></a>, <a href="asyncfutures.html#FutureVar"><span class="Identifier">FutureVar</span></a>, <a href="asyncfutures.html#isFutureLoggingEnabled"><span class="Identifier">isFutureLoggingEnabled</span></a>, <a href="asyncfutures.html#complete,Future[void]"><span class="Identifier">complete</span></a>, <a href="asyncfutures.html#readError,Future[T]"><span class="Identifier">readError</span></a>, <a href="asyncfutures.html#complete,Future[T],T"><span class="Identifier">complete</span></a>, <a href="asyncfutures.html#newFuture,string"><span class="Identifier">newFuture</span></a>, <a href="asyncfutures.html#finished"><span class="Identifier">finished</span></a>, <a href="asyncstreams.html#len,FutureStream[T]"><span class="Identifier">len</span></a>, <a href="asyncstreams.html#callback=,FutureStream[T],proc(FutureStream[T])"><span class="Identifier">callback=</span></a>, <a href="asyncstreams.html#fail,FutureStream[T],ref.Exception"><span class="Identifier">fail</span></a>, <a href="asyncstreams.html#newFutureStream,string"><span class="Identifier">newFutureStream</span></a>, <a href="asyncstreams.html#finished,FutureStream[T]"><span class="Identifier">finished</span></a>, <a href="asyncstreams.html#write,FutureStream[T],T"><span class="Identifier">write</span></a>, <a href="asyncstreams.html#complete,FutureStream[T]"><span class="Identifier">complete</span></a>, <a href="asyncstreams.html#FutureStream"><span class="Identifier">FutureStream</span></a>, <a href="asyncstreams.html#read,FutureStream[T]"><span class="Identifier">read</span></a>, <a href="asyncstreams.html#failed,FutureStream[T]"><span class="Identifier">failed</span></a>
</dl></div>

  </div>
</div>

    <div class="row">
      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br/>
        <small style="color: var(--hint);">Made with Nim. Generated: 2022-12-02 01:09:43 UTC</small>
      </div>
    </div>
  </div>
</div>
    <script defer data-domain="nim-lang.org" src="https://plausible.io/js/plausible.js"></script>
    
</body>
</html>
